@model RaceEvents.Models.ViewModels.EventResultsViewModel
@{
    ViewData["Title"] = "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–±—ã—Ç–∏—è";
}

<h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã: @Model.EventTitle</h2>

<div class="card mb-4">
    <div class="card-body">
        <p><strong>–î–∞—Ç–∞:</strong> @Model.EventDate.ToString("dd.MM.yyyy HH:mm")</p>
        <p><strong>–ú–µ—Å—Ç–æ:</strong> @Model.EventLocation</p>
    </div>
</div>

@if (Model.Podium.Any())
{
    <div class="row mb-4">
        <div class="col-12">
            <h3>–ü–æ–¥–∏—É–º</h3>
        </div>
        @if (Model.Podium.Count >= 2)
        {
            <div class="col-md-4 text-center">
                <div class="card border-warning mb-3">
                    <div class="card-body">
                        <h4 class="text-warning">ü•à 2 –º–µ—Å—Ç–æ</h4>
                        <h5>@Model.Podium[1].ParticipantName</h5>
                        <p class="mb-1">@Model.Podium[1].CarInfo</p>
                        <p class="mb-0"><strong>–õ—É—á—à–µ–µ –≤—Ä–µ–º—è:</strong> @Model.Podium[1].BestLapTime</p>
                    </div>
                </div>
            </div>
        }
        @if (Model.Podium.Count >= 1)
        {
            <div class="col-md-4 text-center">
                <div class="card border-success mb-3">
                    <div class="card-body">
                        <h4 class="text-success">ü•á 1 –º–µ—Å—Ç–æ</h4>
                        <h5>@Model.Podium[0].ParticipantName</h5>
                        <p class="mb-1">@Model.Podium[0].CarInfo</p>
                        <p class="mb-0"><strong>–õ—É—á—à–µ–µ –≤—Ä–µ–º—è:</strong> @Model.Podium[0].BestLapTime</p>
                    </div>
                </div>
            </div>
        }
        @if (Model.Podium.Count >= 3)
        {
            <div class="col-md-4 text-center">
                <div class="card border-info mb-3">
                    <div class="card-body">
                        <h4 class="text-info">ü•â 3 –º–µ—Å—Ç–æ</h4>
                        <h5>@Model.Podium[2].ParticipantName</h5>
                        <p class="mb-1">@Model.Podium[2].CarInfo</p>
                        <p class="mb-0"><strong>–õ—É—á—à–µ–µ –≤—Ä–µ–º—è:</strong> @Model.Podium[2].BestLapTime</p>
                    </div>
                </div>
            </div>
        }
    </div>
}

@if (Model.Results.Any())
{
    <h3>–û–±—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h3>
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>–ú–µ—Å—Ç–æ</th>
                    <th>–£—á–∞—Å—Ç–Ω–∏–∫</th>
                    <th>–ê–≤—Ç–æ–º–æ–±–∏–ª—å</th>
                    <th>–ö—Ä—É–≥–æ–≤</th>
                    <th>–õ—É—á—à–µ–µ –≤—Ä–µ–º—è</th>
                    <th>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è</th>
                    <th>–û–±—â–µ–µ –≤—Ä–µ–º—è</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var result in Model.Results)
                {
                    <tr class="@(result.Position == 1 ? "podium-1" : result.Position == 2 ? "podium-2" : result.Position == 3 ? "podium-3" : "")">
                        <td>
                            <strong>
                                @if (result.Position == 1)
                                {
                                    <span>ü•á</span>
                                }
                                else if (result.Position == 2)
                                {
                                    <span>ü•à</span>
                                }
                                else if (result.Position == 3)
                                {
                                    <span>ü•â</span>
                                }
                                @result.Position
                            </strong>
                        </td>
                        <td>@result.ParticipantName</td>
                        <td>@result.CarInfo</td>
                        <td>@result.TotalLaps</td>
                        <td><strong>@result.BestLapTime</strong></td>
                        <td>@result.AverageLapTime</td>
                        <td>@result.TotalTime</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
else
{
    <div class="alert alert-info">
        –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –µ—â–µ –Ω–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã.
    </div>
}

<div class="mt-3">
    <a asp-action="Index" class="btn btn-secondary">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</a>
</div>

